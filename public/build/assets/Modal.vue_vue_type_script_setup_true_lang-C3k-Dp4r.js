import{E as I,z as J,i as _,d as v,j as i,o as u,c,w as o,b as l,a as S,t as K,f as m,g as A,N as O,O as B}from"./app-B9cZec8x.js";const L={class:"text-h5"},Q={style:{"text-align":"end"}},X=I({__name:"Modal",props:{data:{type:Object,default:null},account:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String}},emits:["reloadAccounts","input"],setup(y,{emit:P}){const f=P,r=y,e=J({id:null,name:null,email:null,password:null,designation:"",region:[],account_type:null,service:null,unit:null,psto:null});_(()=>r.account,n=>{n&&n.region&&n.service&&n.unit&&r.action=="Update"?(e.id=n.id,e.name=n.name,e.designation=n.designation,e.email=n.email,e.account_type=n.account_type,e.region=n.region.id,e.service=n.service.id,e.unit=n.unit.id,n.psto&&(e.psto=n.psto.id)):(e.name=null,e.designation=null,e.email=null,e.region=null,e.account_type=null,e.name=null,e.designation=null,e.email=null,e.account_type=null,e.region=null,e.service=null,e.unit=null,e.psto=null)});const V=v(!1);_(()=>r.value,n=>{V.value=n});const b=v(""),x=v(),k=v();_(()=>r.action,n=>{b.value=n}),_(()=>e.service,n=>{n&&(x.value=j(n))}),_(()=>e.unit,n=>{n&&(k.value=D(n))});const j=n=>{O.get("/service/units",{params:{option:"units",code:n}}).then(t=>{x.value=t.data}).catch(t=>console.log(t))},D=n=>{O.get("/service/pstos",{params:{option:"pstos",code:n,region_id:e.region}}).then(t=>{k.value=t.data}).catch(t=>console.log(t))},w=v(!1),T=async()=>{b.value=="Add"?B.post("/accounts/add",e):b.value=="Update"&&B.post("/accounts/update",e),f("input",!1),f("reloadAccounts")},E=n=>{f("input",n),f("reloadAccounts")};return(n,t)=>{const $=i("v-card-title"),g=i("v-text-field"),s=i("v-col"),d=i("v-row"),z=i("v-checkbox"),p=i("v-select"),q=i("v-card-text"),M=i("v-spacer"),R=i("v-divider"),C=i("v-icon"),N=i("v-btn"),F=i("v-card-action"),G=i("v-card"),H=i("v-dialog");return u(),c(H,{modelValue:V.value,"onUpdate:modelValue":t[12]||(t[12]=a=>V.value=a),width:"600",scrollable:"",persistent:""},{default:o(()=>[l(G,null,{default:o(()=>[l($,{class:"bg-indigo"},{default:o(()=>[S("span",L,K(r.action)+" Account ",1)]),_:1}),r.account.account_type!="admin"?(u(),c(q,{key:0},{default:o(()=>[l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(g,{"prepend-icon":"mdi-account",label:"Name*",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(g,{"prepend-icon":"mdi-email",label:"Email*",modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=a=>e.email=a),variant:"outlined",type:"email",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"9"},{default:o(()=>[r.action=="Add"?(u(),c(g,{key:0,"prepend-icon":"mdi-lock",label:"Password*",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=a=>e.password=a),variant:"outlined",type:w.value?"text":"password",required:""},null,8,["modelValue","type"])):m("",!0)]),_:1}),l(s,{cols:"3"},{default:o(()=>[r.action=="Add"?(u(),c(z,{key:0,modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=a=>w.value=a),label:"Show"},null,8,["modelValue"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>{var a;return[l(p,{"prepend-icon":"mdi-map-marker",label:"Region*",modelValue:e.region,"onUpdate:modelValue":t[4]||(t[4]=U=>e.region=U),variant:"outlined",items:((a=y.data)==null?void 0:a.regions)||[],"item-title":"name","item-value":"id",required:""},null,8,["modelValue","items"])]}),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(p,{"prepend-icon":"mdi-account-circle",label:"Account_type*",modelValue:e.account_type,"onUpdate:modelValue":t[5]||(t[5]=a=>e.account_type=a),variant:"outlined",items:["user","admin","planning","special-user"],"item-title":"name",clearable:"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"?(u(),c(g,{key:0,"prepend-icon":"mdi-account",label:"Designation*",modelValue:e.designation,"onUpdate:modelValue":t[6]||(t[6]=a=>e.designation=a),variant:"outlined"},null,8,["modelValue"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>{var a;return[e.account_type=="user"||e.account_type=="special-user"?(u(),c(p,{key:0,"prepend-icon":"mdi-map-marker",label:"Service*",modelValue:e.service,"onUpdate:modelValue":t[7]||(t[7]=U=>e.service=U),variant:"outlined",items:((a=y.data)==null?void 0:a.services)||[],"item-title":"services_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]}),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"||e.service?(u(),c(p,{key:0,"prepend-icon":"mdi-map-marker",label:"Unit*",modelValue:e.unit,"onUpdate:modelValue":t[8]||(t[8]=a=>e.unit=a),variant:"outlined",items:x.value,"item-title":"unit_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"||e.unit?(u(),c(p,{key:0,"prepend-icon":"mdi-map-marker",label:"PSTO",modelValue:e.psto,"onUpdate:modelValue":t[9]||(t[9]=a=>e.psto=a),variant:"outlined",items:k.value,"item-title":"psto_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1})]),_:1})):(u(),c(q,{key:1},{default:o(()=>[A(" This account is an Administrator cannot be edited ")]),_:1})),l(M),l(F,null,{default:o(()=>[l(R),S("div",Q,[l(N,{class:"ma-2",color:"blue-grey-lighten-2",onClick:t[10]||(t[10]=a=>E(!1))},{default:o(()=>[l(C,{start:"",icon:"mdi-cancel"}),A(" Cancel ")]),_:1}),l(N,{class:"ma-2",color:"green-darken-1",type:"button",onClick:t[11]||(t[11]=a=>T())},{default:o(()=>[A(" Save "),l(C,{end:"",icon:"mdi-check"})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{X as _};
