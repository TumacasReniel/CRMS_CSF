import"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-H7TbCNsL.js";import{_ as F}from"./AppLayout-BJRw3Azq.js";import{z as N,x as P,i as D,o as d,e as r,a as e,g as l,t as k,l as S,m as $,v as U,f as p,O as f,B as V,C as A,d as x,c as E,w as I,h as M,F as C,b as X}from"./app-CjaTPmng.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dost-logo-B4Huuyod.js";const h=t=>(V("data-v-644e184c"),t=t(),A(),t),q={class:"modal-header"},z={class:"modal-title"},R=h(()=>e("i",{class:"ri-add-circle-line me-2"},null,-1)),T={class:"modal-body"},W={key:0,class:"mb-3"},J=h(()=>e("label",{for:"service_name",class:"form-label"},"Service Name",-1)),K={key:1},L={class:"mb-3"},Q=h(()=>e("label",{class:"form-label"},"Service",-1)),G=["value"],H={class:"mb-3"},Y=h(()=>e("label",{for:"unit_name",class:"form-label"},"Unit Name",-1)),Z=h(()=>e("i",{class:"ri-close-line me-1"},null,-1)),ee=h(()=>e("i",{class:"ri-save-line me-1"},null,-1)),te={__name:"AddServiceModal",props:{value:{type:Boolean,default:!1},actionClicked:{type:String,default:null},selectedService:{type:Object,default:null}},emits:["input"],setup(t,{emit:c}){const y=c,v=t,i=N({service_name:"",unit_name:""}),g=P({get:()=>v.value,set:_=>y("input",_)});D(()=>v.value,_=>{_&&(i.service_name="",i.unit_name="")});const u=()=>{y("input",!1)},w=()=>{v.actionClicked==="add_new_service"?(f.post("/services/add",{service_name:i.service_name}),u()):v.actionClicked==="add_new_unit"&&(f.post("/services/unit/add",{service_id:v.selectedService.id,unit_name:i.unit_name}),u())};return(_,m)=>{var o;return g.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:u},[e("div",{class:"modal-content",onClick:m[2]||(m[2]=S(()=>{},["stop"]))},[e("div",q,[e("h5",z,[R,l(" "+k(t.actionClicked==="add_new_service"?"Add New Service":"Add New Unit"),1)]),e("button",{type:"button",class:"modal-close",onClick:u},"Ã—")]),e("div",T,[e("form",{onSubmit:S(w,["prevent"])},[t.actionClicked==="add_new_service"?(d(),r("div",W,[J,$(e("input",{type:"text",class:"form-control",id:"service_name","onUpdate:modelValue":m[0]||(m[0]=s=>i.service_name=s),placeholder:"Enter service name",required:""},null,512),[[U,i.service_name]])])):t.actionClicked==="add_new_unit"?(d(),r("div",K,[e("div",L,[Q,e("input",{type:"text",class:"form-control-plaintext",value:(o=t.selectedService)==null?void 0:o.services_name,readonly:""},null,8,G)]),e("div",H,[Y,$(e("input",{type:"text",class:"form-control",id:"unit_name","onUpdate:modelValue":m[1]||(m[1]=s=>i.unit_name=s),placeholder:"Enter unit name",required:""},null,512),[[U,i.unit_name]])])])):p("",!0)],32)]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:u},[Z,l("Cancel ")]),e("button",{type:"button",class:"btn btn-primary",onClick:w},[ee,l("Save ")])])])])):p("",!0)}}},se=j(te,[["__scopeId","data-v-644e184c"]]),a=t=>(V("data-v-1c2566d2"),t=t(),A(),t),ne=a(()=>e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Service Units ",-1)),ie={class:"container-fluid py-5"},le={class:"row justify-content-center"},ae={class:"col-12 col-lg-10"},ce={class:"card shadow-lg border-0","data-aos":"fade-up"},oe={class:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},de=a(()=>e("h4",{class:"card-title mb-0"},[e("i",{class:"ri-building-4-line me-2"}),l(" Service Units Management ")],-1)),re={class:"d-flex gap-2"},ue=a(()=>e("i",{class:"ri-add-line me-1"},null,-1)),_e=a(()=>e("i",{class:"ri-file-chart-line me-1"},null,-1)),me=a(()=>e("i",{class:"ri-printer-line me-1"},null,-1)),ve={class:"card-body p-0"},be={class:"table-responsive"},he={class:"table table-hover mb-0"},pe=a(()=>e("thead",{class:"table-dark"},[e("tr",null,[e("th",{class:"text-center",style:{width:"80px"}},"#"),e("th",null,"Unit Name"),e("th",{class:"text-center",style:{width:"200px"}},"Actions")])],-1)),fe={class:"table-primary"},ye={colspan:"3",class:"fw-bold fs-5"},ge=a(()=>e("i",{class:"ri-service-line me-2"},null,-1)),we=["onClick"],ke=a(()=>e("i",{class:"ri-add-line"},null,-1)),xe=[ke],Ce={class:"text-center fw-bold"},Se={class:"d-flex align-items-center"},$e=a(()=>e("i",{class:"ri-building-line text-primary me-2"},null,-1)),Ue={class:"text-center"},Ie={class:"btn-group btn-group-sm",role:"group"},Me=["onClick","disabled"],Ne=a(()=>e("i",{class:"ri-eye-line"},null,-1)),Ve=["onClick","disabled"],Ae=a(()=>e("i",{class:"ri-star-line"},null,-1)),je={__name:"Index",props:{service_units:Object,sub_units:Object,user:Object},setup(t){const c=N({service_id:null,unit_id:null}),y=async(o,s)=>{c.service_id=o,c.unit_id=s,f.get("/csi",c,{preserveState:!0})},v=async()=>{c.form_type="all units",f.get("/csi/all-units",c,{preserveState:!0})},i=x(!1),g=x(""),u=x({}),w=async(o,s)=>{c.service_id=o,c.unit_id=s,f.get("/csi/view",c,{preserveState:!0})},_=async(o,s,n)=>{i.value=o,g.value=s,n&&(u.value=n)},m=()=>{window.open("https://drive.google.com/file/d/1s7hgXu2_3znCrcKrXX0PWJUQfwb7SMWU/view?usp=sharing","_blank")};return(o,s)=>(d(),E(F,{title:"Service Units"},{header:I(()=>[ne]),default:I(()=>[e("div",ie,[e("div",le,[e("div",ae,[e("div",ce,[e("div",oe,[de,e("div",re,[t.user.account_type=="admin"?(d(),r("button",{key:0,onClick:s[0]||(s[0]=n=>_(!0,"add_new_service",null)),class:"btn btn-light btn-sm"},[ue,l("Add New Service ")])):p("",!0),e("button",{onClick:s[1]||(s[1]=n=>v()),class:"btn btn-warning btn-sm"},[_e,l("All Unit Ratings ")]),e("button",{onClick:s[2]||(s[2]=n=>m()),class:"btn btn-success btn-sm"},[me,l("CSF Form (Manual) ")])])]),e("div",ve,[e("div",be,[e("table",he,[pe,e("tbody",null,[t.service_units?(d(!0),r(C,{key:0},M(t.service_units.data,(n,Be)=>(d(),r(C,{key:n.id},[e("tr",fe,[e("td",ye,[ge,l(" "+k(n.services_name)+" ",1),t.user.account_type=="admin"?(d(),r("button",{key:0,onClick:b=>_(!0,"add_new_unit",n),class:"btn btn-success btn-sm ms-3"},xe,8,we)):p("",!0)])]),(d(!0),r(C,null,M(n.units,(b,B)=>(d(),r("tr",{key:b.id,class:"align-middle"},[e("td",Ce,k(B+1),1),e("td",null,[e("div",Se,[$e,l(" "+k(b.unit_name),1)])]),e("td",Ue,[e("div",Ie,[e("button",{onClick:O=>w(n.id,b.id),class:"btn btn-primary me-2",disabled:t.user.account_type=="user"&&t.user.unit_id!=b.id},[Ne,l(" View ")],8,Me),e("button",{onClick:O=>y(n.id,b.id),class:"btn btn-warning",disabled:t.user.account_type=="user"&&t.user.unit_id!=b.id},[Ae,l(" Rating ")],8,Ve)])])]))),128))],64))),128)):p("",!0)])])])])])])])]),X(se,{value:i.value,"action-clicked":g.value,"selected-service":u.value,onInput:_},null,8,["value","action-clicked","selected-service"])]),_:1}))}},Xe=j(je,[["__scopeId","data-v-1c2566d2"]]);export{Xe as default};
