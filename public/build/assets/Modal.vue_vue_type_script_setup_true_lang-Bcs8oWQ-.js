import{B as z,x as G,i as _,d as v,j as i,o as c,c as r,w as o,b as n,a as S,t as H,f as m,g as w,J as B,O as N}from"./app-C8jws4JU.js";const K={class:"text-h5"},L={style:{"text-align":"end"}},W=z({__name:"Modal",props:{data:{type:Object,default:null},account:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String}},emits:["reloadAccounts","input"],setup(y,{emit:O}){const f=O,d=y,e=G({id:null,name:null,email:null,password:null,designation:"",region:[],account_type:null,service:null,unit:null,psto:null});_(()=>d.account,l=>{l&&l.region&&l.service&&l.unit&&d.action=="Update"?(e.id=l.id,e.name=l.name,e.designation=l.designation,e.email=l.email,e.account_type=l.account_type,e.region=l.region.id,e.service=l.service.id,e.unit=l.unit.id,l.psto&&(e.psto=l.psto.id)):(e.name=null,e.designation=null,e.email=null,e.region=null,e.account_type=null,e.name=null,e.designation=null,e.email=null,e.account_type=null,e.region=null,e.service=null,e.unit=null,e.psto=null)});const V=v(!1);_(()=>d.value,l=>{V.value=l});const b=v(""),x=v(),k=v();_(()=>d.action,l=>{b.value=l}),_(()=>e.service,l=>{l&&(x.value=P(l))}),_(()=>e.unit,l=>{l&&(k.value=j(l))});const P=l=>{B.get("/service/units",{params:{option:"units",code:l}}).then(t=>{x.value=t.data}).catch(t=>console.log(t))},j=l=>{B.get("/service/pstos",{params:{option:"pstos",code:l,region_id:d.account.region}}).then(t=>{k.value=t.data}).catch(t=>console.log(t))},U=v(!1),D=async()=>{b.value=="Add"?N.post("/accounts/add",e):b.value=="Update"&&N.post("/accounts/update",e),f("input",!1),f("reloadAccounts")},T=l=>{f("input",l),f("reloadAccounts")};return(l,t)=>{const $=i("v-card-title"),g=i("v-text-field"),s=i("v-col"),u=i("v-row"),R=i("v-checkbox"),p=i("v-select"),A=i("v-card-text"),E=i("v-spacer"),F=i("v-divider"),C=i("v-icon"),q=i("v-btn"),I=i("v-card-action"),J=i("v-card"),M=i("v-dialog");return c(),r(M,{modelValue:V.value,"onUpdate:modelValue":t[13]||(t[13]=a=>V.value=a),width:"600",scrollable:"",persistent:""},{default:o(()=>[n(J,null,{default:o(()=>[n($,{class:"bg-indigo"},{default:o(()=>[S("span",K,H(d.action)+" Account ",1)]),_:1}),d.account.account_type!="admin"?(c(),r(A,{key:0},{default:o(()=>[n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(g,{"prepend-icon":"mdi-account",label:"Name*",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(g,{"prepend-icon":"mdi-email",label:"Email*",modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=a=>e.email=a),variant:"outlined",type:"email",required:""},null,8,["modelValue"])]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"9"},{default:o(()=>[d.action=="Add"?(c(),r(g,{key:0,"prepend-icon":"mdi-lock",label:"Password*",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=a=>e.password=a),variant:"outlined",type:U.value?"text":"password",required:""},null,8,["modelValue","type"])):m("",!0)]),_:1}),n(s,{cols:"3"},{default:o(()=>[d.action=="Add"?(c(),r(R,{key:0,modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=a=>U.value=a),label:"Show"},null,8,["modelValue"])):m("",!0)]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(p,{"prepend-icon":"mdi-map-marker",label:"Region*",modelValue:e.region,"onUpdate:modelValue":t[4]||(t[4]=a=>e.region=a),variant:"outlined",items:y.data.regions,"item-title":"name","item-value":"id",onUpdate:t[5]||(t[5]=a=>l.clearFieldIfRegionChange()),required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(p,{"prepend-icon":"mdi-account-circle",label:"Account_type*",modelValue:e.account_type,"onUpdate:modelValue":t[6]||(t[6]=a=>e.account_type=a),variant:"outlined",items:["user","admin","planning","special-user"],"item-title":"name",clearable:"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"?(c(),r(g,{key:0,"prepend-icon":"mdi-account",label:"Designation*",modelValue:e.designation,"onUpdate:modelValue":t[7]||(t[7]=a=>e.designation=a),variant:"outlined"},null,8,["modelValue"])):m("",!0)]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"?(c(),r(p,{key:0,"prepend-icon":"mdi-map-marker",label:"Service*",modelValue:e.service,"onUpdate:modelValue":t[8]||(t[8]=a=>e.service=a),variant:"outlined",items:y.data.services,"item-title":"services_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"||e.service?(c(),r(p,{key:0,"prepend-icon":"mdi-map-marker",label:"Unit*",modelValue:e.unit,"onUpdate:modelValue":t[9]||(t[9]=a=>e.unit=a),variant:"outlined",items:x.value,"item-title":"unit_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1}),n(u,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"||e.unit?(c(),r(p,{key:0,"prepend-icon":"mdi-map-marker",label:"PSTO",modelValue:e.psto,"onUpdate:modelValue":t[10]||(t[10]=a=>e.psto=a),variant:"outlined",items:k.value,"item-title":"psto_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1})]),_:1})):(c(),r(A,{key:1},{default:o(()=>[w(" This account is an Administrator cannot be edited ")]),_:1})),n(E),n(I,null,{default:o(()=>[n(F),S("div",L,[n(q,{class:"ma-2",color:"blue-grey-lighten-2",onClick:t[11]||(t[11]=a=>T(!1))},{default:o(()=>[n(C,{start:"",icon:"mdi-cancel"}),w(" Cancel ")]),_:1}),n(q,{class:"ma-2",color:"green-darken-1",type:"button",onClick:t[12]||(t[12]=a=>D())},{default:o(()=>[w(" Save "),n(C,{end:"",icon:"mdi-check"})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{W as _};
