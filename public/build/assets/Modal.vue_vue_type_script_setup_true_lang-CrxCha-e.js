import{B as G,x as H,i as _,d as v,j as i,o as c,c as r,w as o,b as l,a as q,t as S,g as w,f as m,J as B,O as N}from"./app-DxVRyTIF.js";const K={class:"text-h5"},L={style:{"text-align":"end"}},W=G({__name:"Modal",props:{data:{type:Object,default:null},account:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String}},emits:["reloadAccounts","input"],setup(y,{emit:O}){const f=O,u=y,e=H({id:null,name:null,email:null,password:null,designation:"",region:[],account_type:null,service:null,unit:null,psto:null});_(()=>u.account,n=>{n&&n.region&&n.service&&n.unit&&u.action=="Update"?(e.id=n.id,e.name=n.name,e.designation=n.designation,e.email=n.email,e.account_type=n.account_type,e.region=n.region.id,e.service=n.service.id,e.unit=n.unit.id,n.psto&&(e.psto=n.psto.id)):(e.name=null,e.designation=null,e.email=null,e.region=null,e.account_type=null,e.name=null,e.designation=null,e.email=null,e.account_type=null,e.region=null,e.service=null,e.unit=null,e.psto=null)});const V=v(!1);_(()=>u.value,n=>{V.value=n});const b=v(""),x=v(),k=v();_(()=>u.action,n=>{b.value=n}),_(()=>e.service,n=>{n&&(x.value=P(n))}),_(()=>e.unit,n=>{n&&(k.value=j(n))});const P=n=>{B.get("/service/units",{params:{option:"units",code:n}}).then(t=>{x.value=t.data}).catch(t=>console.log(t))},j=n=>{B.get("/service/pstos",{params:{option:"pstos",code:n,region_id:u.account.region}}).then(t=>{k.value=t.data}).catch(t=>console.log(t))},U=v(!1),D=async()=>{b.value=="Add"?N.post("/accounts/add",e):b.value=="Update"&&N.post("/accounts/update",e),f("input",!1),f("reloadAccounts")},$=n=>{f("input",n),f("reloadAccounts")};return(n,t)=>{const R=i("v-card-title"),g=i("v-text-field"),s=i("v-col"),d=i("v-row"),T=i("v-checkbox"),p=i("v-select"),E=i("v-card-text"),F=i("v-spacer"),I=i("v-divider"),A=i("v-icon"),C=i("v-btn"),J=i("v-card-action"),M=i("v-card"),z=i("v-dialog");return c(),r(z,{modelValue:V.value,"onUpdate:modelValue":t[13]||(t[13]=a=>V.value=a),width:"600",scrollable:"",persistent:""},{default:o(()=>[l(M,null,{default:o(()=>[l(R,{class:"bg-indigo"},{default:o(()=>[q("span",K,S(u.action)+" Account ",1)]),_:1}),l(E,null,{default:o(()=>[w(S(e)+" ",1),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(g,{"prepend-icon":"mdi-account",label:"Name*",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(g,{"prepend-icon":"mdi-email",label:"Email*",modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=a=>e.email=a),variant:"outlined",type:"email",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"9"},{default:o(()=>[u.action=="Add"?(c(),r(g,{key:0,"prepend-icon":"mdi-lock",label:"Password*",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=a=>e.password=a),variant:"outlined",type:U.value?"text":"password",required:""},null,8,["modelValue","type"])):m("",!0)]),_:1}),l(s,{cols:"3"},{default:o(()=>[u.action=="Add"?(c(),r(T,{key:0,modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=a=>U.value=a),label:"Show"},null,8,["modelValue"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(p,{"prepend-icon":"mdi-map-marker",label:"Region*",modelValue:e.region,"onUpdate:modelValue":t[4]||(t[4]=a=>e.region=a),variant:"outlined",items:y.data.regions,"item-title":"name","item-value":"id",onUpdate:t[5]||(t[5]=a=>n.clearFieldIfRegionChange()),required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(p,{"prepend-icon":"mdi-account-circle",label:"Account_type*",modelValue:e.account_type,"onUpdate:modelValue":t[6]||(t[6]=a=>e.account_type=a),variant:"outlined",items:["user","admin","planning","special-user"],"item-title":"name",clearable:"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"?(c(),r(g,{key:0,"prepend-icon":"mdi-account",label:"Designation*",modelValue:e.designation,"onUpdate:modelValue":t[7]||(t[7]=a=>e.designation=a),variant:"outlined"},null,8,["modelValue"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"?(c(),r(p,{key:0,"prepend-icon":"mdi-map-marker",label:"Service*",modelValue:e.service,"onUpdate:modelValue":t[8]||(t[8]=a=>e.service=a),variant:"outlined",items:y.data.services,"item-title":"services_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"||e.service?(c(),r(p,{key:0,"prepend-icon":"mdi-map-marker",label:"Unit*",modelValue:e.unit,"onUpdate:modelValue":t[9]||(t[9]=a=>e.unit=a),variant:"outlined",items:x.value,"item-title":"unit_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1}),l(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[e.account_type=="user"||e.account_type=="special-user"||e.unit?(c(),r(p,{key:0,"prepend-icon":"mdi-map-marker",label:"PSTO",modelValue:e.psto,"onUpdate:modelValue":t[10]||(t[10]=a=>e.psto=a),variant:"outlined",items:k.value,"item-title":"psto_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):m("",!0)]),_:1})]),_:1})]),_:1}),l(F),l(J,null,{default:o(()=>[l(I),q("div",L,[l(C,{class:"ma-2",color:"blue-grey-lighten-2",onClick:t[11]||(t[11]=a=>$(!1))},{default:o(()=>[l(A,{start:"",icon:"mdi-cancel"}),w(" Cancel ")]),_:1}),l(C,{class:"ma-2",color:"green-darken-1",type:"button",onClick:t[12]||(t[12]=a=>D())},{default:o(()=>[w(" Save "),l(A,{end:"",icon:"mdi-check"})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{W as _};
