import{A as E}from"./AppLayout-BvCnFUhK.js";import{_ as F}from"./Modal.vue_vue_type_script_setup_true_lang-B8manTnk.js";import{d as m,i as L,j as c,o as d,c as x,w as o,a as t,b as a,g as u,t as l,u as S,k as T,e as p,h as P,F as V,O as y}from"./app-CfXDuTzq.js";import{S as w}from"./sweetalert2.all-C7X1UeOe.js";import"./dost-logo-B4Huuyod.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Accounts ",-1),Y={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},H={class:"w-full m-5 text-right"},J={class:"text-right m-5"},K=t("thead",null,[t("tr",null,[t("th",{class:"text-left"}," # "),t("th",{class:"text-left"}," Name "),t("th",{class:"text-left"}," Designation "),t("th",{class:"text-left"}," Email "),t("th",{class:"text-left"}," Region "),t("th",{class:"text-center"}," Role/Account Type "),t("th",{class:"text-center"}," Actions ")])],-1),Q={class:"text-center"},W={class:"text-center"},X={key:1,span:""},Z={class:"m-2"},tt={style:{color:"gray"}},et={class:"text-center"},it={__name:"Index",props:{accounts:Object,regions:Object,services:Object},setup(i){const z=i,B=async n=>{w.fire({html:'<div style="font-weight: bold; font-size:25px">Are you sure you want to reset password for this account?</div> ',icon:"warning",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Yes, I'm sure",showLoaderOnConfirm:!0}).then(s=>{s.isConfirmed&&y.post("/accounts/reset-password",{id:n},{onSuccess:()=>{w.fire({title:"Success",icon:"success",text:"Password has been successfully reset."})},onError:()=>{w.fire({title:"Failed",icon:"error",text:this.error?this.error:"Something went wrong please check"})}})})},b=m(!1),k=m(null);m({});const _=m({}),h=m("");L(()=>h.value,n=>{y.get("/accounts",{search:n},{preserveState:!0})});const v=async(n,s,f)=>{b.value=n,k.value=s,_.value=f},O=async()=>{_.value={}};let r=1;const I=async n=>{y.visit("/accounts?page="+n,{preserveState:!0}),r=n};return(n,s)=>{const f=c("v-text-field"),C=c("v-col"),g=c("v-btn"),N=c("v-row"),A=c("v-chip"),R=c("v-pagination"),j=c("v-table"),U=c("v-card");return d(),x(E,{title:"Dashboard"},{header:o(()=>[M]),default:o(()=>[t("div",Y,[t("div",q,[t("div",G,[a(N,{style:{"margin-bottom":"-30px"}},{default:o(()=>[a(C,null,{default:o(()=>[t("div",H,[a(f,{loading:n.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),"onClick:appendInner":n.onClick},null,8,["loading","modelValue","onClick:appendInner"])])]),_:1}),a(C,null,{default:o(()=>[t("div",J,[a(g,{onClick:s[1]||(s[1]=e=>v(!0,"Add",null)),size:"small","prepend-icon":"mdi-plus",color:"green"},{default:o(()=>[u(" Account ")]),_:1})])]),_:1})]),_:1}),a(U,{class:"m-3"},{default:o(()=>[a(j,null,{bottom:o(()=>[t("div",Z,[t("span",tt,[u(" Showing "+l(i.accounts.meta.from)+" to "+l(i.accounts.meta.to)+" out of ",1),t("b",null,l(i.accounts.meta.total)+" records",1)]),t("div",et,[a(R,{modelValue:S(r),"onUpdate:modelValue":s[2]||(s[2]=e=>T(r)?r.value=e:r=e),length:i.accounts.meta.last_page,circle:"",onClick:s[3]||(s[3]=e=>I(S(r)))},null,8,["modelValue","length"])])])]),default:o(()=>[K,t("tbody",null,[(d(!0),p(V,null,P(i.accounts.data,(e,$)=>(d(),p("tr",{key:e.id,class:"hover:bg-gray-200"},[e?(d(),p(V,{key:0},[t("td",null,l($+1),1),t("td",null,l(e.name),1),t("td",null,l(e.designation),1),t("td",null,l(e.email),1),t("td",null,l(e.region.order),1),t("td",Q,[e.account_type=="admin"?(d(),x(A,{key:0,class:"bg-indigo",size:"small"},{default:o(()=>[u(l(e.account_type),1)]),_:2},1024)):(d(),x(A,{key:1,class:"bg-green",size:"small"},{default:o(()=>[u(l(e.account_type),1)]),_:2},1024))]),t("td",W,[a(g,{size:"small",onClick:D=>B(e.id),"prepend-icon":"mdi-lock-reset",color:"secondary",class:"mr-5"},{default:o(()=>[u(" Reset ")]),_:2},1032,["onClick"]),a(g,{onClick:D=>v(!0,"Update",e),size:"small","prepend-icon":"mdi-update",color:"primary"},{default:o(()=>[u(" Update ")]),_:2},1032,["onClick"])])],64)):(d(),p("td",X," No data at the moment"))]))),128))])]),_:1})]),_:1})])])]),a(F,{value:b.value,account:_.value,regions:i.regions,data:z,pstos:n.pstos,action:k.value,onInput:v,onReloadAccounts:O},null,8,["value","account","regions","data","pstos","action"])]),_:1})}}};export{it as default};
