import{m as B,i as f,d as _,o as i,e as a,a as s,t as m,j as r,v as S,q as N,n as U,f as p,s as w,F as v,h,g as c,O as M,x as j,p as I,l as L,y as V}from"./app-DQjH5gfR.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const n=u=>(I("data-v-0cb03830"),u=u(),L(),u),G={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block","background-color":"rgba(0,0,0,0.6)"},"aria-modal":"true"},H={class:"modal-dialog modal-lg modal-dialog-scrollable modal-custom"},J={class:"modal-content"},K=n(()=>s("div",{class:"modal-header-bg"},null,-1)),Q={class:"modal-header",style:{background:"transparent",color:"white",position:"relative","z-index":"1"}},W={class:"d-flex align-items-center"},X=n(()=>s("div",{class:"header-icon-container"},[s("i",{class:"ri-account-circle-line header-icon"})],-1)),Y={class:"modal-title mb-0"},Z=n(()=>s("small",{class:"opacity-75",style:{"font-size":"0.8rem"}},"Fill in the details below",-1)),ss={key:0,class:"modal-body",style:{position:"relative","z-index":"1"}},es=n(()=>s("div",{class:"decorative-circle circle-1"},null,-1)),ts=n(()=>s("div",{class:"decorative-circle circle-2"},null,-1)),os={class:"row g-3"},ls={class:"col-md-6"},ns={class:"form-group-custom"},is=n(()=>s("label",{class:"form-label fw-semibold"},[c("Full Name "),s("span",{class:"text-danger"},"*")],-1)),as={class:"input-group-custom"},cs=n(()=>s("span",{class:"input-icon"},[s("i",{class:"ri-user-line"})],-1)),ds={class:"col-md-6"},rs={class:"form-group-custom"},us=n(()=>s("label",{class:"form-label fw-semibold"},[c("Email Address "),s("span",{class:"text-danger"},"*")],-1)),ps={class:"input-group-custom"},_s=n(()=>s("span",{class:"input-icon"},[s("i",{class:"ri-mail-line"})],-1)),ms={key:0,class:"col-md-6"},vs={class:"form-group-custom"},fs=n(()=>s("label",{class:"form-label fw-semibold"},[c("Password "),s("span",{class:"text-danger"},"*")],-1)),hs={class:"input-group-custom"},gs=n(()=>s("span",{class:"input-icon"},[s("i",{class:"ri-lock-line"})],-1)),bs=["type"],ys={class:"col-md-6"},ws={class:"form-group-custom"},ks=n(()=>s("label",{class:"form-label fw-semibold"},[c("Region "),s("span",{class:"text-danger"},"*")],-1)),xs={class:"select-wrapper"},Ss=n(()=>s("option",{value:""},"Select Region",-1)),Us=["value"],As=n(()=>s("i",{class:"ri-map-pin-line select-icon"},null,-1)),Cs={class:"col-md-6"},Ps={class:"form-group-custom"},Ts=n(()=>s("label",{class:"form-label fw-semibold"},[c("Account Type "),s("span",{class:"text-danger"},"*")],-1)),zs={class:"account-type-selector"},Ms=["onClick"],Vs={key:1,class:"col-md-6"},Es={class:"form-group-custom"},Fs=n(()=>s("label",{class:"form-label fw-semibold"},[c("Designation "),s("span",{class:"text-danger"},"*")],-1)),Os={class:"input-group-custom"},qs=n(()=>s("span",{class:"input-icon"},[s("i",{class:"ri-briefcase-line"})],-1)),Ds={key:2,class:"col-md-6"},$s={class:"form-group-custom"},Bs=n(()=>s("label",{class:"form-label fw-semibold"},[c("Service "),s("span",{class:"text-danger"},"*")],-1)),Ns={class:"select-wrapper"},js=n(()=>s("option",{value:""},"Select Service",-1)),Is=["value"],Ls=n(()=>s("i",{class:"ri-service-line select-icon"},null,-1)),Rs={key:3,class:"col-md-6"},Gs={class:"form-group-custom"},Hs=n(()=>s("label",{class:"form-label fw-semibold"},[c("Unit "),s("span",{class:"text-danger"},"*")],-1)),Js={class:"select-wrapper"},Ks=n(()=>s("option",{value:""},"Select Unit",-1)),Qs=["value"],Ws=n(()=>s("i",{class:"ri-building-line select-icon"},null,-1)),Xs={key:4,class:"col-md-6"},Ys={class:"form-group-custom"},Zs=n(()=>s("label",{class:"form-label fw-semibold"},"PSTO",-1)),se={class:"select-wrapper"},ee=n(()=>s("option",{value:""},"Select PSTO",-1)),te=["value"],oe=n(()=>s("i",{class:"ri-map-pin-2-line select-icon"},null,-1)),le={key:1,class:"modal-body",style:{position:"relative","z-index":"1"}},ne=n(()=>s("div",{class:"alert alert-warning d-flex align-items-center",style:{"border-radius":"15px",background:"linear-gradient(135deg, rgba(255, 193, 7, 0.15) 0%, rgba(255, 152, 0, 0.15) 100%)",border:"none"}},[s("i",{class:"ri-alert-line me-2 fs-4"}),s("span",{class:"fw-semibold"},"This account is an Administrator and cannot be edited for security reasons.")],-1)),ie=[ne],ae={class:"modal-footer",style:{position:"relative","z-index":"1"}},ce=n(()=>s("i",{class:"ri-close-line me-1"},null,-1)),de=["disabled"],re={key:0},ue=n(()=>s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1)),pe={key:1},_e=n(()=>s("i",{class:"ri-check-line me-1"},null,-1)),me={key:1,class:"modal-backdrop fade show"},ve={__name:"Modal",props:{data:{type:Object,default:null},account:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String}},emits:["reloadAccounts","input"],setup(u,{emit:E}){const g=E,d=u,e=B({id:null,name:null,email:null,password:null,designation:null,region:null,account_type:null,service:null,unit:null,psto:null});f(()=>d.account,l=>{l&&d.action=="Update"?(e.id=l.id,e.name=l.name,e.designation=l.designation,e.email=l.email,e.account_type=l.account_type,e.region=l.region?l.region.id:null,e.service=l.service?l.service.id:null,e.unit=l.unit?l.unit.id:null,e.psto=l.psto?l.psto.id:null):(e.id=null,e.name=null,e.designation=null,e.email=null,e.region=null,e.account_type=null,e.service=null,e.unit=null,e.psto=null,e.password=null)});const k=_(!1);f(()=>d.value,l=>{k.value=l});const x=_(""),A=_([]),C=_([]);f(()=>d.action,l=>{x.value=l}),f(()=>e.service,(l,o)=>{l&&l!==o&&F(l)}),f(()=>e.unit,(l,o)=>{l&&l!==o&&O(l)});const F=l=>{l&&V.get("/service/units",{params:{option:"units",code:l}}).then(o=>{A.value=o.data}).catch(o=>console.log(o))},O=l=>{l&&V.get("/service/pstos",{params:{option:"pstos",code:l,region_id:e.region}}).then(o=>{C.value=o.data}).catch(o=>console.log(o))},b=_(!1),y=_(!1),q=async()=>{if(!e.name||!e.email||!e.region||!e.account_type){Swal.fire({icon:"warning",title:"Missing Fields",text:"Please fill in all required fields"});return}if(d.action==="Add"&&!e.password){Swal.fire({icon:"warning",title:"Missing Password",text:"Please enter a password"});return}y.value=!0,x.value==="Add"?M.post("/accounts/add",e):x.value==="Update"&&M.post("/accounts/update",e),g("input",!1),g("reloadAccounts"),setTimeout(()=>{y.value=!1},500)},P=l=>{g("input",l),g("reloadAccounts")},D=[{value:"user",text:"User",icon:"ri-user-line",color:"#43e97b"},{value:"admin",text:"Admin",icon:"ri-shield-star-line",color:"#667eea"},{value:"planning",text:"Planning",icon:"ri-calendar-check-line",color:"#fa7268"},{value:"special-user",text:"Special User",icon:"ri-vip-diamond-line",color:"#f093fb"}],$=()=>d.account&&d.account.account_type==="admin";return(l,o)=>{var T,z;return i(),a(v,null,[k.value?(i(),a("div",G,[s("div",H,[s("div",J,[K,s("div",Q,[s("div",W,[X,s("div",null,[s("h5",Y,m(d.action)+" Account ",1),Z])]),s("button",{type:"button",class:"btn-close btn-close-white",onClick:o[0]||(o[0]=t=>P(!1)),"aria-label":"Close"})]),$()?(i(),a("div",le,ie)):(i(),a("div",ss,[es,ts,s("div",os,[s("div",ls,[s("div",ns,[is,s("div",as,[cs,r(s("input",{type:"text",class:"form-control custom-input-field","onUpdate:modelValue":o[1]||(o[1]=t=>e.name=t),placeholder:"Enter full name"},null,512),[[S,e.name]])])])]),s("div",ds,[s("div",rs,[us,s("div",ps,[_s,r(s("input",{type:"email",class:"form-control custom-input-field","onUpdate:modelValue":o[2]||(o[2]=t=>e.email=t),placeholder:"Enter email address",required:""},null,512),[[S,e.email]])])])]),d.action==="Add"?(i(),a("div",ms,[s("div",vs,[fs,s("div",hs,[gs,r(s("input",{type:b.value?"text":"password",class:"form-control custom-input-field","onUpdate:modelValue":o[3]||(o[3]=t=>e.password=t),placeholder:"Enter password",required:""},null,8,bs),[[N,e.password]]),s("button",{class:"password-toggle",type:"button",onClick:o[4]||(o[4]=t=>b.value=!b.value)},[s("i",{class:U(b.value?"ri-eye-off-line":"ri-eye-line")},null,2)])])])])):p("",!0),s("div",ys,[s("div",ws,[ks,s("div",xs,[r(s("select",{class:"form-select custom-select-field","onUpdate:modelValue":o[5]||(o[5]=t=>e.region=t),required:""},[Ss,(i(!0),a(v,null,h(((T=u.data)==null?void 0:T.regions)||[],t=>(i(),a("option",{key:t.id,value:t.id},m(t.name),9,Us))),128))],512),[[w,e.region]]),As])])]),s("div",Cs,[s("div",Ps,[Ts,s("div",zs,[(i(),a(v,null,h(D,t=>s("div",{key:t.value,class:U(["account-type-option",{active:e.account_type===t.value}]),style:j({"--type-color":t.color}),onClick:fe=>e.account_type=t.value},[s("i",{class:U(t.icon)},null,2),s("span",null,m(t.text),1)],14,Ms)),64))])])]),e.account_type==="user"||e.account_type==="special-user"?(i(),a("div",Vs,[s("div",Es,[Fs,s("div",Os,[qs,r(s("input",{type:"text",class:"form-control custom-input-field","onUpdate:modelValue":o[6]||(o[6]=t=>e.designation=t),placeholder:"Enter designation"},null,512),[[S,e.designation]])])])])):p("",!0),e.account_type==="user"||e.account_type==="special-user"?(i(),a("div",Ds,[s("div",$s,[Bs,s("div",Ns,[r(s("select",{class:"form-select custom-select-field","onUpdate:modelValue":o[7]||(o[7]=t=>e.service=t)},[js,(i(!0),a(v,null,h(((z=u.data)==null?void 0:z.services)||[],t=>(i(),a("option",{key:t.id,value:t.id},m(t.services_name),9,Is))),128))],512),[[w,e.service]]),Ls])])])):p("",!0),e.account_type==="user"||e.account_type==="special-user"?(i(),a("div",Rs,[s("div",Gs,[Hs,s("div",Js,[r(s("select",{class:"form-select custom-select-field","onUpdate:modelValue":o[8]||(o[8]=t=>e.unit=t)},[Ks,(i(!0),a(v,null,h(A.value,t=>(i(),a("option",{key:t.id,value:t.id},m(t.unit_name),9,Qs))),128))],512),[[w,e.unit]]),Ws])])])):p("",!0),e.account_type==="user"||e.account_type==="special-user"?(i(),a("div",Xs,[s("div",Ys,[Zs,s("div",se,[r(s("select",{class:"form-select custom-select-field","onUpdate:modelValue":o[9]||(o[9]=t=>e.psto=t)},[ee,(i(!0),a(v,null,h(C.value,t=>(i(),a("option",{key:t.id,value:t.id},m(t.psto_name),9,te))),128))],512),[[w,e.psto]]),oe])])])):p("",!0)])])),s("div",ae,[s("button",{type:"button",class:"btn btn-secondary btn-custom-secondary",onClick:o[10]||(o[10]=t=>P(!1))},[ce,c(" Cancel ")]),s("button",{type:"button",class:"btn btn-primary btn-custom-primary",onClick:o[11]||(o[11]=t=>q()),disabled:y.value},[y.value?(i(),a("span",re,[ue,c(" Saving... ")])):(i(),a("span",pe,[_e,c(" Save ")]))],8,de)])])])])):p("",!0),k.value?(i(),a("div",me)):p("",!0)],64)}}},be=R(ve,[["__scopeId","data-v-0cb03830"]]);export{be as default};
