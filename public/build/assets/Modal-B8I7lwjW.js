import{d as g,m as y,i as u,o as v,e as S,a as t,g as l,t as w,k as x,j as k,v as O,b as V,u as P,f as T,O as U,p as N,l as B}from"./app-DQjH5gfR.js";import{s as C}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-DnPa8Etz.js";import{S as c}from"./sweetalert2.all-BWbeXjl0.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const a=o=>(N("data-v-ebbee00f"),o=o(),B(),o),j={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block","background-color":"rgba(0,0,0,0.5)"}},E={class:"modal-dialog modal-dialog-centered modal-lg modal-custom"},F={class:"modal-content"},I={class:"modal-header",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #6B8DD6 100%)",color:"white"}},M={class:"modal-title"},q=a(()=>t("i",{class:"ri-map-pin-range-line me-2"},null,-1)),z={class:"modal-body"},A={class:"row"},G={class:"col-12 mb-3"},H=a(()=>t("label",{class:"form-label fw-semibold"},[l("Unit Name "),t("span",{class:"text-danger"},"*")],-1)),J={class:"input-group custom-input-group"},K=a(()=>t("span",{class:"input-group-text"},[t("i",{class:"ri-building-4-line"})],-1)),L={class:"row"},Q={class:"col-12 mb-3"},R=a(()=>t("label",{class:"form-label fw-semibold"},[l("PSTOs "),t("span",{class:"text-danger"},"*")],-1)),W=a(()=>t("i",{class:"ri-close-line me-1"},null,-1)),X=a(()=>t("i",{class:"ri-save-line me-1"},null,-1)),Y={__name:"Modal",props:{unit:{type:Object,default:null},unit_pstos:{type:Object,default:null},pstos:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String},page_number:{type:Number}},emits:["reloadUnits","input"],setup(o,{emit:f}){const m=f,n=o,p=g(!1),e=y({unit_id:null,unit_name:null,pstos:null});u(()=>n.value,s=>{p.value=s}),u(()=>n.unit,s=>{s?(e.unit_id=s.id,e.unit_name=s.unit_name):_()}),u(()=>n.unit_pstos,s=>{s&&s.data&&(e.pstos=s.data)});const _=()=>{e.unit_id=null,e.unit_name=null,e.pstos=null},h=()=>e.unit_name?!e.pstos||e.pstos.length===0?(c.fire({title:"Validation Error",icon:"error",text:"Please select at least one PSTO"}),!1):!0:(c.fire({title:"Validation Error",icon:"error",text:"Please select a unit"}),!1),b=async()=>{h()&&U.post("/unit-pstos/assign",e,{onSuccess:()=>{c.fire({title:"Success",icon:"success",text:"PSTO has been assigned successfully."}),d()},onError:s=>{c.fire({title:"Failed",icon:"error",text:(s==null?void 0:s.message)||"Something went wrong, please try again"})}})},d=()=>{m("input",!1),m("reloadUnits"),_()};return(s,i)=>p.value?(v(),S("div",j,[t("div",E,[t("div",F,[t("div",I,[t("h5",M,[q,l(" "+w(n.action)+" Unit PSTO ",1)]),t("button",{type:"button",class:"btn-close btn-close-white",onClick:d})]),t("div",z,[t("form",{onSubmit:x(b,["prevent"])},[t("div",A,[t("div",G,[H,t("div",J,[K,k(t("input",{type:"text",class:"form-control custom-input","onUpdate:modelValue":i[0]||(i[0]=r=>e.unit_name=r),placeholder:"Unit name",readonly:""},null,512),[[O,e.unit_name]])])])]),t("div",L,[t("div",Q,[R,V(P(C),{modelValue:e.pstos,"onUpdate:modelValue":i[1]||(i[1]=r=>e.pstos=r),options:o.pstos.data,multiple:!0,placeholder:"Select Unit PSTO",label:"psto_name","track-by":"psto_name","options-limit":10,limit:3,"max-height":200,class:"custom-multiselect"},null,8,["modelValue","options"])])])],32)]),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary btn-custom-secondary",onClick:d},[W,l(" Cancel ")]),t("button",{type:"button",class:"btn btn-primary btn-custom-primary",onClick:b},[X,l(" Save ")])])])])])):T("",!0)}},st=D(Y,[["__scopeId","data-v-ebbee00f"]]);export{st as default};
