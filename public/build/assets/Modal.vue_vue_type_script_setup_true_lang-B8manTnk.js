import{B as z,i as m,x as F,d as v,j as i,o as r,c as p,w as o,b as n,a as w,t as G,f,g as A,J as q,O}from"./app-CfXDuTzq.js";const H={class:"text-h5"},I={style:{"text-align":"end"}},L=z({__name:"Modal",props:{data:{type:Object,default:null},account:{type:Object,default:null},value:{type:Boolean,default:!1},services:{type:Object,default:null},action:{type:String}},emits:["reloadAccounts","input"],setup(g,{emit:B}){const _=B,c=g;m(()=>c.account,t=>{t&&t.region&&t.account_type&&t.region&&t.service&&t.unit&&t.psto&&c.action=="Update"&&(e.id=t.id,e.name=t.name,e.designation=t.designation,e.email=t.email,e.selected_account_type=t.account_type,e.selected_region=t.region.id,e.selected_service=t.service.id,e.selected_unit=t.unit.id,e.selected_psto=t.psto.id)});const e=F({id:null,name:null,email:null,designation:"",selected_region:[],selected_account_type:null,selected_service:null,selected_unit:null,selected_psto:null}),y=v(!1);m(()=>c.value,t=>{y.value=t});const V=v(""),b=v(),x=v();m(()=>c.action,t=>{V.value=t}),m(()=>e.selected_service,t=>{t&&(b.value=N(t))}),m(()=>e.selected_unit,t=>{t&&(x.value=S(t))});const N=t=>{q.get("/service/units",{params:{option:"units",code:t}}).then(l=>{b.value=l.data}).catch(l=>console.log(l))},S=t=>{q.get("/service/pstos",{params:{option:"pstos",code:t,region_id:e.selected_region}}).then(l=>{x.value=l.data}).catch(l=>console.log(l))},j=async()=>{V.value=="Add"?O.post("/accounts/add",e):V.value=="Update"&&O.post("/accounts/update",e),_("input",!1),_("reloadAccounts")},D=t=>{_("input",t),_("reloadAccounts")};return(t,l)=>{const $=i("v-card-title"),k=i("v-text-field"),s=i("v-col"),d=i("v-row"),u=i("v-select"),P=i("v-card-text"),T=i("v-spacer"),E=i("v-divider"),U=i("v-icon"),C=i("v-btn"),J=i("v-card-action"),M=i("v-card"),R=i("v-dialog");return r(),p(R,{modelValue:y.value,"onUpdate:modelValue":l[11]||(l[11]=a=>y.value=a),width:"600",scrollable:"",persistent:""},{default:o(()=>[n(M,null,{default:o(()=>[n($,{class:"bg-indigo"},{default:o(()=>[w("span",H,G(c.action)+" Account",1)]),_:1}),n(P,null,{default:o(()=>[n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(k,{"prepend-icon":"mdi-account",label:"Name*",modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=a=>e.name=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(k,{"prepend-icon":"mdi-email",label:"Email*",modelValue:e.email,"onUpdate:modelValue":l[1]||(l[1]=a=>e.email=a),variant:"outlined",type:"email",required:""},null,8,["modelValue"])]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(u,{"prepend-icon":"mdi-map-marker",label:"Region*",modelValue:e.selected_region,"onUpdate:modelValue":l[2]||(l[2]=a=>e.selected_region=a),variant:"outlined",items:g.data.regions,"item-title":"name","item-value":"id",onChange:l[3]||(l[3]=a=>t.setData()),required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[n(u,{"prepend-icon":"mdi-account-circle",label:"Account_type*",modelValue:e.selected_account_type,"onUpdate:modelValue":l[4]||(l[4]=a=>e.selected_account_type=a),variant:"outlined",items:["user","admin","planning"],"item-title":"name",clearable:"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.selected_account_type=="user"?(r(),p(k,{key:0,"prepend-icon":"mdi-account",label:"Designation*",modelValue:e.designation,"onUpdate:modelValue":l[5]||(l[5]=a=>e.designation=a),variant:"outlined"},null,8,["modelValue"])):f("",!0)]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.selected_account_type=="user"?(r(),p(u,{key:0,"prepend-icon":"mdi-map-marker",label:"Service*",modelValue:e.selected_service,"onUpdate:modelValue":l[6]||(l[6]=a=>e.selected_service=a),variant:"outlined",items:g.data.services,"item-title":"services_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):f("",!0)]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.selected_account_type=="user"||e.selected_service?(r(),p(u,{key:0,"prepend-icon":"mdi-map-marker",label:"Unit*",modelValue:e.selected_unit,"onUpdate:modelValue":l[7]||(l[7]=a=>e.selected_unit=a),variant:"outlined",items:b.value,"item-title":"unit_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):f("",!0)]),_:1})]),_:1}),n(d,{style:{"margin-bottom":"-30px"}},{default:o(()=>[n(s,{cols:"12"},{default:o(()=>[e.selected_account_type=="user"||e.selected_unit&&e.selected_region?(r(),p(u,{key:0,"prepend-icon":"mdi-map-marker",label:"PSTO*",modelValue:e.selected_psto,"onUpdate:modelValue":l[8]||(l[8]=a=>e.selected_psto=a),variant:"outlined",items:x.value,"item-title":"psto_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):f("",!0)]),_:1})]),_:1})]),_:1}),n(T),n(J,null,{default:o(()=>[n(E),w("div",I,[n(C,{class:"ma-2",color:"blue-grey-lighten-2",onClick:l[9]||(l[9]=a=>D(!1))},{default:o(()=>[n(U,{start:"",icon:"mdi-cancel"}),A(" Cancel ")]),_:1}),n(C,{class:"ma-2",color:"green-darken-1",type:"button",onClick:l[10]||(l[10]=a=>j())},{default:o(()=>[A(" Save "),n(U,{end:"",icon:"mdi-check"})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{L as _};
