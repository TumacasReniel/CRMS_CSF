import{d as g,m as y,i as r,o as S,e as v,a as t,g as l,t as w,k as x,j as k,v as O,b as V,u as P,f as T,O as U,p as N,l as C}from"./app-DQjH5gfR.js";import{s as j}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-DnPa8Etz.js";import{S as c}from"./sweetalert2.all-BWbeXjl0.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const a=o=>(N("data-v-584ab2f8"),o=o(),C(),o),E={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block","background-color":"rgba(0,0,0,0.5)"}},F={class:"modal-dialog modal-dialog-centered modal-lg modal-custom"},I={class:"modal-content"},M={class:"modal-header",style:{background:"linear-gradient(135deg, #00bcd4 0%, #00acc1 50%, #00838f 100%)",color:"white"}},D={class:"modal-title"},q=a(()=>t("i",{class:"ri-map-pin-2-line me-2"},null,-1)),z={class:"modal-body"},A={class:"row"},G={class:"col-12 mb-3"},H=a(()=>t("label",{class:"form-label fw-semibold"},[l("SubUnit Name "),t("span",{class:"text-danger"},"*")],-1)),J={class:"input-group custom-input-group"},K=a(()=>t("span",{class:"input-group-text"},[t("i",{class:"ri-building-2-line"})],-1)),L={class:"row"},Q={class:"col-12 mb-3"},R=a(()=>t("label",{class:"form-label fw-semibold"},[l("PSTOs "),t("span",{class:"text-danger"},"*")],-1)),W=a(()=>t("i",{class:"ri-close-line me-1"},null,-1)),X=a(()=>t("i",{class:"ri-save-line me-1"},null,-1)),Y={__name:"Modal",props:{sub_unit:{type:Object,default:null},sub_unit_pstos:{type:Object,default:null},pstos:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String},page_number:{type:Number}},emits:["reloadSubUnits","input"],setup(o,{emit:f}){const m=f,n=o,p=g(!1),s=y({sub_unit_id:null,sub_unit_name:null,pstos:null});r(()=>n.value,e=>{p.value=e}),r(()=>n.sub_unit,e=>{e?(s.sub_unit_id=e.id,s.sub_unit_name=e.sub_unit_name):_()}),r(()=>n.sub_unit_pstos,e=>{e&&e.data&&(s.pstos=e.data)});const _=()=>{s.sub_unit_id=null,s.sub_unit_name=null,s.pstos=null},h=()=>s.sub_unit_name?!s.pstos||s.pstos.length===0?(c.fire({title:"Validation Error",icon:"error",text:"Please select at least one PSTO"}),!1):!0:(c.fire({title:"Validation Error",icon:"error",text:"Please select a sub unit"}),!1),b=async()=>{h()&&U.post("/sub-unit-pstos/assign",s,{onSuccess:()=>{c.fire({title:"Success",icon:"success",text:"PSTO has been assigned successfully."}),u()},onError:e=>{c.fire({title:"Failed",icon:"error",text:(e==null?void 0:e.message)||"Something went wrong, please try again"})}})},u=()=>{m("input",!1),m("reloadSubUnits"),_()};return(e,i)=>p.value?(S(),v("div",E,[t("div",F,[t("div",I,[t("div",M,[t("h5",D,[q,l(" "+w(n.action)+" SubUnit PSTO ",1)]),t("button",{type:"button",class:"btn-close btn-close-white",onClick:u})]),t("div",z,[t("form",{onSubmit:x(b,["prevent"])},[t("div",A,[t("div",G,[H,t("div",J,[K,k(t("input",{type:"text",class:"form-control custom-input","onUpdate:modelValue":i[0]||(i[0]=d=>s.sub_unit_name=d),placeholder:"SubUnit name",readonly:""},null,512),[[O,s.sub_unit_name]])])])]),t("div",L,[t("div",Q,[R,V(P(j),{modelValue:s.pstos,"onUpdate:modelValue":i[1]||(i[1]=d=>s.pstos=d),options:o.pstos.data,multiple:!0,placeholder:"Select SubUnit PSTO",label:"psto_name","track-by":"psto_name","options-limit":10,limit:3,"max-height":200,class:"custom-multiselect"},null,8,["modelValue","options"])])])],32)]),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary btn-custom-secondary",onClick:u},[W,l(" Cancel ")]),t("button",{type:"button",class:"btn btn-primary btn-custom-primary",onClick:b},[X,l(" Save ")])])])])])):T("",!0)}},et=B(Y,[["__scopeId","data-v-584ab2f8"]]);export{et as default};
